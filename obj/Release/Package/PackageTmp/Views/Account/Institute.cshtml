@model IOAS.Models.CreateInstituteModel
@{
    ViewBag.Title = "Institute";
    Layout = "~/Views/Shared/_LayoutFluid.cshtml";
}
<script src="@Url.Content("~/Scripts/Account/Institute.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<div class="row hd-tt-bg" id="addnewpage">
    <div class="col-md-4">

        <h3>Institute</h3>

    </div>
    <div class="col-md-8 flt-nav-links">


        <a href="#" id="btnaddnew"> <i class="ion-plus"></i>Add New</a>

    </div>
</div>
<div class="row">
@using (Html.BeginForm("Institute", "Account", FormMethod.Post, new { @class = "", role = "form", @id = "formCU", enctype = "multipart/form-data" }))
{
    <div class="col-md-12">
        <div class="page-wrapper">
            <div class="white-bg" style="display:none"id="inscreate">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group custom-form-group">
                            <label>Name of Institute</label>
                            @Html.TextBoxFor(m => m.Institutename, new { @class = "form-control", @required = "required",@id="txtinstitutename" })
                            @Html.HiddenFor(m=>m.InstituteId,new {@id= "txtinstituteid" })
                            @Html.ValidationMessageFor(m => m.Institutename)
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group custom-form-group">
                            <label>Institute code</label>
                            @Html.TextBoxFor(m => m.InstituteCode, new { @class = "form-control", @required = "required", @id = "txtinstitutecode" })
                            @Html.ValidationMessageFor(m => m.InstituteCode)
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group custom-form-group">
                            <label>Address line1</label>
                            @Html.TextBoxFor(m => m.Address1, new { @class = "form-control", @required = "required",@id="txtaddress1" })
                            @Html.ValidationMessageFor(m => m.Address1)
                        </div>
                    </div>
                    
                </div>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Address line2</label>
                    @Html.TextBoxFor(m => m.Address2, new { @class = "form-control", @required = "required", @id = "txtaddress2" })
                    @Html.ValidationMessageFor(m => m.Address2)
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>City</label>
                    @Html.TextBoxFor(m => m.City, new { @class = "form-control", @required = "required",@id="txtcity" })
                    @Html.ValidationMessageFor(m => m.City)
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>State</label>
                    @Html.TextBoxFor(m => m.State, new { @class = "form-control", @required = "required",@id="txtstate" })
                    @Html.ValidationMessageFor(m => m.State)
                </div>
            </div>
            
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Post code / Zip</label>
                    @Html.TextBoxFor(m => m.zipCode, new { @class = "form-control", @required = "required", @id = "txtzipcode" })
                    @Html.ValidationMessageFor(m => m.zipCode)
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Country</label>
                    @Html.DropDownListFor(m => m.selCountry, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select country",
                                           new { @class = "form-control", @required = "required", @id = "country" })
                    @Html.ValidationMessageFor(m => m.selCountry)
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Contact Person First name</label>
                    @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control", @required = "required" ,@id="txtfirstname"})
                    @Html.ValidationMessageFor(m => m.FirstName)
                </div>
            </div>
            
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Contact Person Last name </label>
                    @Html.TextBoxFor(m => m.lastName, new { @class = "form-control", @required = "required", @id = "txtlastname" })
                    @Html.ValidationMessageFor(m => m.lastName)
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label> Contact Designation</label>
                    @Html.TextBoxFor(m => m.contactDES, new { @class = "form-control", @required = "required",@id="txtdesignation" })
                    @Html.ValidationMessageFor(m => m.contactDES)
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Contact Number</label>
                    @Html.TextBoxFor(m => m.ContactMobile, new { @class = "form-control", @required = "required",@id="txtmobileno" })
                    @Html.ValidationMessageFor(m => m.ContactMobile)
                </div>
            </div>
            
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Email</label>
                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @required = "required", @id = "txtemail" })
                    @Html.ValidationMessageFor(m => m.Email)
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group custom-form-group">
                    <label>Logo</label>
                    <input type="file" id="logoURL" name="logoURL" />
                    @*<a href="#"><span id="linklogo"></span></a>*@
                    @Html.ValidationMessageFor(m => m.logoURL)
                </div>
            </div>
        </div>
            </div>
            <div class="row mt10" style="display:none" id="btndisplay">
                <div class="col-md-12 text-center pd-tb-30">
                    <input type="submit" class="btn btn-primary mr10" value="Save" id="btnSave" />
                    <input type="submit" class="btn btn-primary mr10" value="Update" id="btnupdate" style="display:none"/>
                    <input type="button" onclick="window.location.href='@Url.Action("Institute", "Account")';" class="btn btn-default" value="Close" id="btnsaveclose" />

                </div>
            </div>
            <div class="row mt30">
                <div class="col-md-12">
                    <div class="page-wrapper">
                        <div class="custom-jsgrid-normal">
                            <div id="Institutelist"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
</div>
<div id="Savemodal" class="modal fade modal-success" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <i class="ion-android-checkmark-circle"></i>
                <h3 class="modal-title">Created successfully</h3>
            </div>
            <div class="modal-body">

                <p>Institute  created successfully</p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div id="warrningmodal" class="modal fade modal-warning" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <i class="ion-android-warning"></i>
                <h3 class="modal-title">Institute name exists !.</h3>
            </div>
            <div class="modal-body">

                <p>@ViewBag.warrning</p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div id="Updatemodal" class="modal fade modal-success" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <i class="ion-android-checkmark-circle"></i>
                <h3 class="modal-title">Updated successfully</h3>
            </div>
            <div class="modal-body">

                <p>Institute Updated successfully</p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div id="Deletedmodal" class="modal fade modal-success" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <i class="ion-android-checkmark-circle"></i>
                <h3 class="modal-title">Deleted successfully</h3>
            </div>
            <div class="modal-body">
                <p>Institute  Deleted successfully</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div id="Errormodal" class="modal fade modal-error" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <i class="ion-android-cancel"></i>
                <h3 class="modal-title">Error Message</h3>
            </div>
            <div class="modal-body">

                <p>"Something went to wrong please contact admin."</p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<script type="text/javascript">
    $('#txtinstitutename').val('');
    $('#txtinstitutecode').val('');
    $('#txtaddress1').val('');
    $('#txtaddress2').val('');
    $('#txtcity').val('');
    $('#txtstate').val('');
    $('#country').prop("selectedIndex", 0);
    $('#txtzipcode').val('');
    $('#txtfirstname').val('');
    $('#txtlastname').val('');
    $('#txtdesignation').val('');
    $('#txtmobileno').val('');
    $('#txtemail').val('');
    $("#logoURL").change(function () {
        var file = $(this).val();
        if (file != null) {
            var extension = file.substr((file.lastIndexOf('.') + 1));
            switch (extension) {
                case 'jpg':
                case 'jpeg':
                case 'png':
                case 'JPG':
                case 'JPEG':
                case 'PNG':
                    flag = true;
                    break;
                default:
                    flag = false;
            }
        }
        if (flag == false) {
            $("#Imagefile").html("<span style='color:red'>You can upload only jpg,png,jpeg extension file</span>");
            return false;
        }
        else {
            $("#Imagefile").html("<span></span>");
            var size = GetFileSize('file');
            if (size > 1) {
                $("#Imagefile").html("<span style='color:red'>You can upload image up to 10 MB</span>");
            }
            else {
                $("#Imagefile").html("<span></span>");
            }
        }


    });
    $('#btnaddnew').on('click', function () {
        $('#inscreate,#btnSave,#btndisplay').show();
        $('#Institutelist,#addnewpage').hide();

    });
    $(document).ready(function () {
        var success = '@ViewBag.sucess';
        if (success != '') {
            $('#Savemodal').modal('show');
        }
        var warrning = '@ViewBag.warrning'
        if (warrning != '') {
            $('#warrningmodal').modal('show');
        }
        var update = '@ViewBag.update'
        if (update != '') {
            $('#Updatemodal').modal('show');
        }
        var error = '@ViewBag.error'
        if (error != '') {
            $('#Errormodal').modal('show');
        }
    });
</script>